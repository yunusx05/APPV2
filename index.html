<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Focus Arena - Task Gamification</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- FontAwesome for the design consistency -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- TAILWIND CSS - CRITICAL FOR LAYOUT -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Outfit', 'sans-serif'],
            },
            colors: {
              slate: {
                800: '#1e293b',
                900: '#0f172a',
                950: '#020617',
              }
            }
          }
        }
      }
    </script>

    <style>
        :root {
            --bg-deep: #020617;
            --text-main: #f9fafb;
            --text-muted: #64748b;
            --card-bg: rgba(15, 23, 42, 0.96);
            --card-border: rgba(148, 163, 184, 0.35);
            --primary: #a855f7;
            --secondary: #22d3ee;
            --accent: #f97316;
            --gold: #fbbf24;
            --success: #22c55e;
            --gradient-body:
                radial-gradient(at 0% 0%, rgba(129, 140, 248, 0.38) 0px, transparent 55%),
                radial-gradient(at 100% 100%, rgba(56, 189, 248, 0.35) 0px, transparent 55%),
                radial-gradient(at 50% 0%, rgba(236, 72, 153, 0.22) 0px, transparent 55%);

            --brief-card-bg: #020617;
            --brief-text-color: #e2e8f0;
        }

        * {
            box-sizing: border-box;
            /* Critical for preventing flex items from overflowing */
            min-width: 0; 
        }

        body {
            font-family: 'Outfit', sans-serif;
            margin: 0;
            min-height: 100vh;
            background-color: var(--bg-deep);
            background-image: var(--gradient-body);
            background-attachment: fixed;
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px 12px;
            color: var(--text-main);
            overflow-x: hidden; 
        }

        /* HIDE SCROLLBARS BUT KEEP FUNCTIONALITY */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .scene-orb {
            position: fixed;
            width: 340px;
            height: 340px;
            border-radius: 999px;
            filter: blur(80px);
            opacity: 0.65;
            z-index: -1;
        }

        .orb-1 {
            background: radial-gradient(circle, rgba(129, 140, 248, 0.9), transparent 60%);
            top: -80px;
            left: -80px;
        }

        .orb-2 {
            background: radial-gradient(circle, rgba(56, 189, 248, 0.85), transparent 60%);
            bottom: -80px;
            right: -80px;
        }

        /* PHONE SHELL */
        .phone-shell {
            position: relative;
            width: 100%;
            max-width: 460px; /* Max width constraint */
            border-radius: 32px;
            padding: 18px 16px 20px;
            background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(148, 163, 184, 0.4);
            box-shadow: 0 24px 80px rgba(15, 23, 42, 0.9);
            min-height: 85vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Contains children */
        }

        .container {
            width: 100%;
            max-width: 100%;
            flex: 1;
            overflow-y: auto; /* Allow internal scrolling */
            padding-right: 2px; /* Prevent scrollbar overlapping content */
            /* Hide scrollbar for container */
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .container::-webkit-scrollbar {
            display: none;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        .animate-slideUp {
            animation: slideUp 0.4s ease-out forwards;
        }

        /* HEADER & UTILS */
        .app-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 2px 2px 14px;
            flex-shrink: 0;
        }

        .app-header-left { display: flex; align-items: center; gap: 12px; }
        .app-logo {
            width: 34px; height: 34px; border-radius: 16px;
            background: conic-gradient(from 160deg, #f97316, #ec4899, #6366f1, #22d3ee, #f97316);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; box-shadow: 0 10px 25px rgba(236, 72, 153, 0.5);
        }
        .app-title { font-size: 1.1rem; font-weight: 800; letter-spacing: 0.02em; line-height: 1.1; }
        .app-subtitle { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.16em; margin-top: 2px; }
        
        .streak-pill {
            display: inline-flex; align-items: center; gap: 6px; padding: 6px 10px;
            border-radius: 999px; background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(251, 191, 36, 0.75);
            font-size: 0.7rem; font-weight: 700; text-transform: uppercase;
        }
        .streak-dot { width: 8px; height: 8px; border-radius: 999px; background: #facc15; box-shadow: 0 0 14px rgba(250, 204, 21, 0.9); }
        .streak-count { color: #fef3c7; }

        /* CARDS */
        .card {
            background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.22), transparent 50%), var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 24px; padding: 18px;
            backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
            box-shadow: 0 12px 35px rgba(15, 23, 42, 0.8);
            margin-bottom: 16px; position: relative; overflow: hidden;
        }
        .card::before {
            content: ""; position: absolute; inset: 0;
            background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.18), transparent 55%);
            opacity: 0.7; pointer-events: none;
        }
        .card > * { position: relative; z-index: 1; }

        .grid-stats { display: grid; grid-template-columns: 1.8fr 1.4fr; gap: 12px; margin-bottom: 14px; flex-shrink: 0; }
        
        /* PROFILE CARD */
        .card-profile { display: flex; align-items: center; gap: 10px; padding: 14px; }
        .avatar-box {
            font-size: 1.8rem;
            background: radial-gradient(circle at top, rgba(56, 189, 248, 0.35), rgba(15, 23, 42, 1));
            width: 48px; height: 48px; border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 16px 32px rgba(56, 189, 248, 0.6);
            flex-shrink: 0;
        }
        .profile-info { overflow: hidden; }
        .profile-info h2 { margin: 0; font-size: 1rem; font-weight: 800; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .stat-row-small { display: flex; justify-content: space-between; font-size: 0.6rem; color: var(--text-muted); margin-top: 4px; }
        .progress-container { height: 6px; background: rgba(15, 23, 42, 0.85); border-radius: 999px; margin-top: 8px; overflow: hidden; }
        .bar { height: 100%; border-radius: 999px; transition: width 0.5s ease; }
        .bar-xp { background: linear-gradient(90deg, #a855f7, #ec4899, #22d3ee); }

        /* CA CARD */
        .ca-box {
            display: flex; flex-direction: column; justify-content: space-between;
            background: radial-gradient(circle at top left, rgba(251, 191, 36, 0.18), transparent 55%), var(--card-bg);
            padding: 12px;
        }
        .ca-label { display: flex; justify-content: space-between; align-items: center; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.1em; color: #eab308; margin-bottom: 6px; }
        .ca-value { font-size: 0.9rem; font-weight: 800; color: #fef3c7; }
        .ca-track { height: 8px; background: rgba(15, 23, 42, 0.8); border-radius: 999px; overflow: hidden; border: 1px solid rgba(251, 191, 36, 0.45); }
        .ca-fill { height: 100%; background: linear-gradient(90deg, #fbbf24, #f97316); width: 0%; transition: width 1s ease; }
        
        /* NAV PILLS */
        .nav {
            display: flex; background: rgba(15, 23, 42, 0.9); padding: 4px; border-radius: 999px;
            margin-bottom: 18px; border: 1px solid rgba(148, 163, 184, 0.4); flex-wrap: nowrap; gap: 4px; overflow-x: auto;
            flex-shrink: 0; /* Prevent shrinking */
        }
        .nav button {
            flex: 1; background: transparent; border: none; color: var(--text-muted); padding: 8px 12px;
            border-radius: 999px; cursor: pointer; font-weight: 600; font-size: 0.75rem;
            display: flex; align-items: center; justify-content: center; gap: 6px;
            transition: all 0.18s ease; min-width: max-content; white-space: nowrap;
        }
        .nav button.active {
            background: linear-gradient(135deg, rgba(129, 140, 248, 0.3), rgba(236, 72, 153, 0.4));
            color: #f9fafb; box-shadow: 0 6px 18px rgba(129, 140, 248, 0.6);
        }

        /* TASKS */
        ul { padding: 0; list-style: none; margin: 0; }
        .task {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(30, 64, 175, 0.7));
            border: 1px solid rgba(148, 163, 184, 0.4); padding: 12px 10px 12px 10px;
            border-radius: 18px; margin-bottom: 10px; display: flex; align-items: center;
            justify-content: space-between; cursor: pointer; position: relative; overflow: hidden;
            transition: transform 0.16s ease, box-shadow 0.16s ease;
        }
        .task::before {
            content: ""; position: absolute; inset: 0;
            background: radial-gradient(circle at top right, rgba(56, 189, 248, 0.22), transparent 55%);
            opacity: 0; transition: opacity 0.16s ease;
        }
        .task:hover {
            border-color: rgba(248, 250, 252, 0.55);
            box-shadow: 0 10px 28px rgba(15, 23, 42, 0.9); transform: translateY(-1.5px);
        }
        .task:hover::before { opacity: 1; }
        
        .task-left { display: flex; align-items: center; flex: 1; min-width: 0; overflow: hidden; }
        .task-content { display: flex; flex-direction: column; gap: 2px; overflow: hidden; flex: 1; min-width: 0; }
        .task-title { font-weight: 600; font-size: 0.85rem; color: #e5e7eb; line-height: 1.3; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .task-meta { display: flex; gap: 6px; align-items: center; font-size: 0.65rem; color: var(--text-muted); flex-wrap: wrap; }
        
        .checkbox {
            width: 20px; height: 20px; border: 2px solid #475569; border-radius: 6px; margin-right: 10px;
            display: flex; align-items: center; justify-content: center; flex-shrink: 0;
            background: radial-gradient(circle at top, rgba(15, 23, 42, 1), rgba(15, 23, 42, 0.6));
        }
        .task.done .checkbox { background: linear-gradient(135deg, #22c55e, #4ade80); border-color: #4ade80; }
        .task.done .checkbox::after { content: 'âœ”'; color: #022c22; font-weight: 900; font-size: 10px; }
        .task.done { opacity: 0.45; filter: grayscale(0.9); text-decoration: line-through; }
        
        .badge {
            padding: 2px 6px; border-radius: 999px; font-size: 0.6rem; font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.05em; display: inline-flex; align-items: center; gap: 3px;
            border: 1px solid transparent; white-space: nowrap;
        }
        .bg-prod { background: rgba(59, 130, 246, 0.12); color: #93c5fd; border-color: rgba(59, 130, 246, 0.5); }
        .bg-sale { background: rgba(16, 185, 129, 0.14); color: #6ee7b7; border-color: rgba(16, 185, 129, 0.5); }
        .bg-social { background: rgba(236, 72, 153, 0.16); color: #f9a8d4; border-color: rgba(236, 72, 153, 0.55); }
        .bg-admin { background: rgba(148, 163, 184, 0.16); color: #cbd5e1; border-color: rgba(148, 163, 184, 0.55); }
        .bg-biz { background: rgba(6, 182, 212, 0.14); color: #67e8f9; border-color: rgba(6, 182, 212, 0.5); }

        .btn-del {
            background: none; border: none; font-size: 0.9rem; cursor: pointer; opacity: 0.35;
            padding: 4px; color: #cbd5e1; flex-shrink: 0; transition: all 0.2s; margin-left: 4px;
        }
        .btn-del:hover { opacity: 1; color: #fb7185; }

        /* GENERATOR STYLES */
        .gen-card { margin-bottom: 10px; }
        .gen-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 14px; }
        select, input[type="text"], input[type="date"] {
            width: 100%; background: rgba(15, 23, 42, 0.96); border: 1px solid rgba(148, 163, 184, 0.6);
            padding: 12px; border-radius: 12px; color: white; outline: none; font-family: 'Outfit', sans-serif;
            font-size: 0.8rem; margin-bottom: 6px;
        }
        select:focus, input:focus { border-color: #a855f7; box-shadow: 0 0 0 1px rgba(168, 85, 247, 0.6); }

        .btn-main {
            width: 100%; background: linear-gradient(135deg, #a855f7, #ec4899, #22d3ee); border: none;
            padding: 12px; border-radius: 14px; color: white; font-weight: 800; font-size: 0.8rem;
            cursor: pointer; letter-spacing: 0.14em; text-transform: uppercase; margin-top: 2px;
            box-shadow: 0 14px 40px rgba(168, 85, 247, 0.75);
            transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
        }
        .btn-main:hover { transform: translateY(-1.5px); box-shadow: 0 18px 45px rgba(168, 85, 247, 0.9); filter: brightness(1.08); }

        /* BRIEF PAPER */
        .brief-paper {
            background: var(--brief-card-bg); color: var(--brief-text-color); padding: 20px 16px;
            border-radius: 20px; box-shadow: 0 18px 55px rgba(15, 23, 42, 0.95); margin-top: 18px;
            position: relative; border: 1px solid rgba(148, 163, 184, 0.5); animation: slideUp 0.3s ease-out;
        }
        .bp-header { text-align: center; border-bottom: 2px solid rgba(148, 163, 184, 0.6); padding-bottom: 12px; margin-bottom: 14px; }
        .bp-label { font-size: 0.65rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.16em; display: block; margin-bottom: 4px; color: #9ca3af; }
        .bp-title { font-size: 1.4rem; font-weight: 900; margin: 0; line-height: 1.1; text-transform: uppercase; letter-spacing: 0.05em; color: #e5e7eb; word-wrap: break-word; }
        .bp-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; border-bottom: 1px solid rgba(148, 163, 184, 0.5); padding-bottom: 12px; margin-bottom: 12px; font-size: 0.85rem; }
        .bp-h3 { font-size: 0.65rem; font-weight: 700; margin: 0; color: #9ca3af; text-transform: uppercase; }
        .bp-val { font-size: 0.85rem; font-weight: 800; color: #f9fafb; margin-top: 2px; }
        .bp-section { margin-bottom: 12px; }
        .bp-h2 { font-size: 0.8rem; font-weight: 900; margin: 0 0 4px 0; text-transform: uppercase; letter-spacing: 0.14em; color: #e5e7eb; }
        .bp-text { font-size: 0.8rem; line-height: 1.5; margin: 0; color: #cbd5e1; }
        .bp-deadline { position: absolute; top: -8px; right: -6px; background: #ef4444; color: white; font-weight: 900; padding: 4px 10px; font-size: 0.7rem; text-transform: uppercase; border-radius: 999px; transform: rotate(6deg); box-shadow: 3px 3px 0 #000; }
        
        .btn-accept {
            background: #facc15; color: #422006; width: 100%; padding: 12px; margin-top: 6px;
            border: none; font-weight: 800; font-size: 0.85rem; text-transform: uppercase;
            letter-spacing: 0.14em; cursor: pointer; border-radius: 14px;
            box-shadow: 0 12px 32px rgba(250, 204, 21, 0.7);
            transition: transform 0.12s ease, box-shadow 0.12s ease;
        }

        /* BOTTOM NAV */
        .bottom-nav {
            display: flex; align-items: center; justify-content: space-between;
            padding: 8px 24px 8px; margin-top: 10px; border-radius: 20px;
            background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.96));
            border: 1px solid rgba(15, 23, 42, 1);
            position: absolute; bottom: 12px; left: 16px; right: 16px; z-index: 50;
        }
        .bottom-nav-item {
            flex: 1; background: transparent; border: none; color: var(--text-muted); font-size: 0.65rem;
            display: flex; flex-direction: column; align-items: center; gap: 3px; padding: 4px 2px; cursor: pointer;
        }
        .bottom-nav-item.active { color: #e5e7eb; }
        .bottom-nav-item i { font-size: 1.1rem; }
        .bottom-nav-item.active i { text-shadow: 0 0 14px rgba(129, 140, 248, 0.8); }

        .empty-state {
            text-align: center; padding: 32px 20px; color: var(--text-muted);
            font-style: italic; border: 1px dashed rgba(148, 163, 184, 0.5);
            border-radius: 18px; font-size: 0.8rem; margin-top: 10px;
        }
        
        .section-title {
            margin-top: 16px; border-bottom: 1px solid rgba(148, 163, 184, 0.4);
            padding-bottom: 4px; margin-bottom: 8px; font-size: 0.75rem;
            letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-muted);
        }

        /* UTILS */
        .text-center { text-align: center; }
        .w-full { width: 100%; }
        .hidden { display: none; }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
        "react-dom": "https://aistudiocdn.com/react-dom@^19.2.0",
        "react": "https://aistudiocdn.com/react@^19.2.0",
        "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1",
        "vite": "https://aistudiocdn.com/vite@^7.2.6",
        "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
        "path": "https://aistudiocdn.com/path@^0.12.7",
        "@google/generative-ai": "https://aistudiocdn.com/@google/generative-ai@^0.24.1",
        "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
        "react/": "https://aistudiocdn.com/react@^19.2.0/"
      }
    }
    </script>
</head>
<body>
    <div class="scene-orb orb-1"></div>
    <div class="scene-orb orb-2"></div>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
</body>
</html>